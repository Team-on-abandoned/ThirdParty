<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- http://hge.relishgames.com -->

<html>

<head>
<meta name="Keywords" content="game engine, 2d, hardware accelerated, hge, engine, relish games, game development">
<meta name="Description" content="Haaf's Game Engine - Hardware accelerated 2D games engine">
<title>Haaf's Game Engine - Игровой 2D движок с поддержкой аппаратного ускорения</title>
<link rel=stylesheet type=text/css href=hge.css>
<script language="JavaScript" src="hge.js"></script>
</head>

<body onload="setContents('cnt_tutorials.html');" bgcolor=#ffffff text=#000000 link=#7F0000 vlink=#7F0000 alink=#7F0000 marginwidth=0 marginheight=0 leftmargin=0 topmargin=0>
<table height=100% cellspacing=0 cellpadding=0 border=0><tr>

<td valign=top>
<table width=566 cellspacing=0 cellpadding=20 border=0><tr><td>
<h1 style="margin-top:0px">Пример 03 - Использование вспомогательных классов</h1>
<p>
<b>В</b> этом примере мы научимся как пользоваться некоторыми вспомогательными классами <b>HGE</b>. Вопервых 
мы подключим необходимые заголовки и объявим глобальный указатель на интерфейс <b>HGE</b> который 
необходим для работы большинства вспомогательных классов:
</p>
<pre>
#include &lt;hge.h&gt;
#include &lt;hgesprite.h&gt;
#include &lt;hgefont.h&gt;
#include &lt;hgeparticle.h&gt;

HGE *hge=0;
</pre>
<p>
Теперь мы объявим указатели на объекты <b>HGE</b> который будем использовать.
</p>
<pre>
hgeSprite*          spr;
hgeSprite*          spt;
hgeFont*            fnt;
hgeParticleSystem*  par;

HTEXTURE            tex;
</pre>
<p>
В функции <b>FrameFunc</b> (функция кадра) мы обнавляем объект системы частиц: мы настраиваем 
частоту испускания основываясь на скорости спрайта и перемещяем в текущую позицию спрайта.
</p>
<pre>
  par->info.nEmission=(int)(dx*dx+dy*dy)*2;
  par->MoveTo(x,y);
  par->Update(dt);
</pre>
<p>
Затем мы отображаем все наши объекты, вызывая их методы отобажения:
</p>
<pre>
  hge->Gfx_BeginScene();
  hge->Gfx_Clear(0);
  par->Render();
  spr->Render(x, y);
  fnt->printf(5, 5, "dt:%.3f\nFPS:%d", dt, hge->Timer_GetFPS());
  hge->Gfx_EndScene();
</pre>
<p>
В функции <b>WinMain</b> после инициализации, мы создаем объекты <b>HGE</b>, которые потом будем 
использовать. Сначала мы создаем и настраиваем спрайт:
</p>
<pre>
    spr=new hgeSprite(tex, 96, 64, 32, 32);
    spr->SetColor(0xFFFFA000);
    spr->SetHotSpot(16, 16);
</pre>
<p>
Затем мы загружаем шрифт. Щрифт представляетсядвумя файлами:
<b>font1.fnt</b> и <b>font1.png</b>.
</p>
<pre>
    fnt=new hgeFont("font1.fnt");
</pre>
<p>
Мы создаем систему частиц и спрайт для нее:
</p>
<pre>
    spt=new hgeSprite(tex, 32, 32, 32, 32);
    spt->SetBlendMode(
              BLEND_COLORMUL | BLEND_ALPHAADD | BLEND_NOZWRITE);
    spt->SetHotSpot(16, 16);
    par=new hgeParticleSystem("trail.psi", spt, 0);
    par->Fire();
</pre>
<p>
Теперь все объекты созданы и мы начинаем игровой цикл:
</p>
<pre>
    hge->System_Start();
</pre>
<p>
Когда игровой цикл заканчивается, мы удаляем все созданные <b>HGE</b> объекты:
</p>
<pre>
    delete par;
    delete fnt;
    delete spt;
    delete spr;
</pre>
<p>
Остальной процесс завершения идентичен тем, что были в предидущих примерах.
<br><br>
Полный исходный код с детальными комментариями для этого примера можно найти в директории <b>tutorials\tutorial03</b>. 
Требуемые медиа файлы можно найти в директории <b>tutorials\precompiled</b>.
</p>
<br>
</td></tr></table>
</td>

</tr></table>
</body>

</html>